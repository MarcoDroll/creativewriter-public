<div class="context-selector" *ngIf="selectedScenes.length > 0 || includeStoryOutline">
  <div class="context-chips">
    <!-- Story Outline Chip -->
    <ion-chip 
      *ngIf="includeStoryOutline" 
      color="tertiary" 
      class="context-chip" 
      (click)="onToggleStoryOutline($event)">
      <ion-label>Story Outline</ion-label>
      <ion-icon 
        name="close-outline" 
        (click)="onToggleStoryOutline($event)">
      </ion-icon>
    </ion-chip>

    <!-- Scene Context Chips -->
    <ion-chip 
      *ngFor="let scene of selectedScenes" 
      [color]="scene.sceneId === sceneId ? 'primary' : 'medium'"
      class="context-chip">
      <ion-label>{{ scene.sceneTitle }}</ion-label>
      <ion-icon 
        name="close-outline" 
        (click)="onRemoveSceneContext(scene, $event)">
      </ion-icon>
    </ion-chip>
  </div>

  <!-- Add Context Button -->
  <ion-button 
    fill="clear" 
    size="small" 
    color="medium" 
    class="add-context-btn"
    (click)="onShowSceneSelector($event)">
    <ion-icon name="add-circle-outline" slot="icon-only"></ion-icon>
  </ion-button>
</div>