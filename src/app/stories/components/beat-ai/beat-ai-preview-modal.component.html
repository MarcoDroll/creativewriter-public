<div class="preview-modal" 
     *ngIf="isOpen" 
     (click)="hidePromptPreview()" 
     (keydown.escape)="hidePromptPreview()" 
     tabindex="0">
  <div class="preview-content" 
       #previewContentEl 
       (click)="$event.stopPropagation()" 
       (keydown)="$event.stopPropagation()" 
       tabindex="0">
    <div class="preview-header" (mousedown)="startResize($event)">
      <h3>Prompt-Vorschau</h3>
      <div class="header-actions">
        <button class="icon-btn copy-btn" 
                (click)="copyPromptToClipboard(); $event.stopPropagation()" 
                [title]="copyButtonText">
          <ion-icon name="copy-outline"></ion-icon>
        </button>
        <button class="close-btn" 
                (click)="hidePromptPreview(); $event.stopPropagation()">×</button>
      </div>
    </div>
    <div class="preview-body">
      <pre class="prompt-preview" [innerHTML]="getHighlightedPrompt()"></pre>
    </div>
    <div class="preview-footer">
      <button class="btn btn-secondary" 
              (click)="hidePromptPreview(); $event.stopPropagation()">
        Schließen
      </button>
      <button class="btn btn-primary" 
              (click)="hidePromptPreview(); onGenerateContent(); $event.stopPropagation()">
        Jetzt generieren
      </button>
    </div>
    <div class="resize-handle" (mousedown)="startResize($event)"></div>
  </div>
</div>